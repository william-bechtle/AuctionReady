{"ast":null,"code":"import _slicedToArray from\"C:/Users/wjbec/Documents/GitHub/Project2/front_end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import Grid from'@material-ui/core/Grid';import Box from'@material-ui/core/Box';import{IconButton}from'@material-ui/core';import{makeStyles}from'@material-ui/core/styles';import PhotoCameraRoundedIcon from\"@material-ui/icons/PhotoCameraRounded\";import axios from'axios';import{useDispatch,useSelector}from'react-redux';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:{height:\"100%\",textAlign:'center'},imgBox:{maxWidth:\"80%\",maxHeight:\"80%\",margin:\"auto\"},img:{height:\"inherit\",maxWidth:\"inherit\"},input:{display:\"none\"}};});var Camera=function Camera(){var classes=useStyles();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),source=_useState2[0],setSource=_useState2[1];var dispatch=useDispatch();var sendFileName=function sendFileName(fileName){dispatch({type:\"setItemFile\",payload:fileName});};var handleCapture=function handleCapture(e){if(e.target.files){if(e.target.files.length!==0){var file=e.target.files[0];var formData=new FormData();var newUrl=URL.createObjectURL(file);setSource(newUrl);formData.append(\"file\",file);//console.log(formData.get('file'));\ndispatch({type:'handleCapture',payload:formData});}}};var storeImage=useSelector(function(state){return state.image;});var imageUpload=function imageUpload(){axios.post(\"http://localhost:4000/images\",storeImage).then(function(res){console.log('Axios response: ',res);sendFileName(res.data);dispatch({type:'clearStateImage'});setSource(\"\");},function(error){console.error(error);}).catch(function(error){return console.error(error);});};return/*#__PURE__*/_jsxs(\"div\",{className:classes.root,children:[/*#__PURE__*/_jsx(Grid,{container:true,children:/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,children:[source&&/*#__PURE__*/_jsx(Box,{display:\"flex\",justifyContent:\"center\",border:1,className:classes.imgBox,children:/*#__PURE__*/_jsx(\"img\",{src:source,alt:\"snap\",className:classes.img})}),/*#__PURE__*/_jsx(\"input\",{accept:\"image/*\",className:classes.input,id:\"icon-button-file\",type:\"file\",capture:\"environment\",onChange:function onChange(e){return handleCapture(e);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"icon-button-file\",children:/*#__PURE__*/_jsx(IconButton,{color:\"primary\",\"aria-label\":\"upload picture\",component:\"span\",children:/*#__PURE__*/_jsx(PhotoCameraRoundedIcon,{fontSize:\"large\",color:\"primary\"})})})]})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-dark\",onClick:imageUpload,children:\"Save file\"})]});};export default Camera;","map":{"version":3,"sources":["C:/Users/wjbec/Documents/GitHub/Project2/front_end/src/components/camera/index.js"],"names":["React","useState","Grid","Box","IconButton","makeStyles","PhotoCameraRoundedIcon","axios","useDispatch","useSelector","useStyles","theme","root","height","textAlign","imgBox","maxWidth","maxHeight","margin","img","input","display","Camera","classes","source","setSource","dispatch","sendFileName","fileName","type","payload","handleCapture","e","target","files","length","file","formData","FormData","newUrl","URL","createObjectURL","append","storeImage","state","image","imageUpload","post","then","res","console","log","data","error","catch"],"mappings":"yKAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,CAAAA,IAAP,KAAiB,wBAAjB,CACA,MAAOC,CAAAA,GAAP,KAAgB,uBAAhB,CACA,OAASC,UAAT,KAA2B,mBAA3B,CACA,OAASC,UAAT,KAA2B,0BAA3B,CACA,MAAOC,CAAAA,sBAAP,KAAmC,uCAAnC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,C,wFAEA,GAAMC,CAAAA,SAAS,CAAGL,UAAU,CAAC,SAACM,KAAD,QAAY,CACvCC,IAAI,CAAE,CACJC,MAAM,CAAE,MADJ,CAEJC,SAAS,CAAE,QAFP,CADiC,CAKvCC,MAAM,CAAE,CACNC,QAAQ,CAAE,KADJ,CAENC,SAAS,CAAE,KAFL,CAGNC,MAAM,CAAE,MAHF,CAL+B,CAUvCC,GAAG,CAAE,CACHN,MAAM,CAAE,SADL,CAEHG,QAAQ,CAAE,SAFP,CAVkC,CAcvCI,KAAK,CAAE,CACLC,OAAO,CAAE,MADJ,CAdgC,CAAZ,EAAD,CAA5B,CAmBA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CAEnB,GAAMC,CAAAA,OAAO,CAAGb,SAAS,EAAzB,CACA,cAA4BT,QAAQ,CAAC,EAAD,CAApC,wCAAOuB,MAAP,eAAeC,SAAf,eACA,GAAMC,CAAAA,QAAQ,CAAGlB,WAAW,EAA5B,CAEA,GAAMmB,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,QAAD,CAAc,CACjCF,QAAQ,CAAC,CAACG,IAAI,CAAE,aAAP,CAAsBC,OAAO,CAACF,QAA9B,CAAD,CAAR,CAED,CAHD,CAKA,GAAMG,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,CAAD,CAAO,CAC3B,GAAIA,CAAC,CAACC,MAAF,CAASC,KAAb,CAAoB,CAClB,GAAIF,CAAC,CAACC,MAAF,CAASC,KAAT,CAAeC,MAAf,GAA0B,CAA9B,CAAiC,CAC/B,GAAMC,CAAAA,IAAI,CAAGJ,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,CAAb,CACA,GAAMG,CAAAA,QAAQ,CAAG,GAAIC,CAAAA,QAAJ,EAAjB,CACA,GAAMC,CAAAA,MAAM,CAAGC,GAAG,CAACC,eAAJ,CAAoBL,IAApB,CAAf,CACAX,SAAS,CAACc,MAAD,CAAT,CACAF,QAAQ,CAACK,MAAT,CACE,MADF,CAEEN,IAFF,EAIA;AACAV,QAAQ,CAAC,CAAEG,IAAI,CAAE,eAAR,CAAyBC,OAAO,CAAEO,QAAlC,CAAD,CAAR,CAED,CACF,CACF,CAhBD,CAkBA,GAAMM,CAAAA,UAAU,CAAGlC,WAAW,CAAE,SAAAmC,KAAK,QAAIA,CAAAA,KAAK,CAACC,KAAV,EAAP,CAA9B,CAEA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACxBvC,KAAK,CAACwC,IAAN,CAAW,8BAAX,CAA2CJ,UAA3C,EACCK,IADD,CACO,SAAAC,GAAG,CAAI,CACZC,OAAO,CAACC,GAAR,CAAa,kBAAb,CAAiCF,GAAjC,EACAtB,YAAY,CAACsB,GAAG,CAACG,IAAL,CAAZ,CACA1B,QAAQ,CAAC,CAACG,IAAI,CAAE,iBAAP,CAAD,CAAR,CACAJ,SAAS,CAAC,EAAD,CAAT,CACD,CAND,CAMG,SAAC4B,KAAD,CAAW,CACZH,OAAO,CAACG,KAAR,CAAcA,KAAd,EACD,CARD,EASCC,KATD,CASO,SAAAD,KAAK,QAAIH,CAAAA,OAAO,CAACG,KAAR,CAAcA,KAAd,CAAJ,EATZ,EAUD,CAXD,CAaA,mBACE,aAAK,SAAS,CAAE9B,OAAO,CAACX,IAAxB,wBACE,KAAC,IAAD,EAAM,SAAS,KAAf,uBACE,MAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,WACIY,MAAM,eACN,KAAC,GAAD,EAAK,OAAO,CAAC,MAAb,CAAoB,cAAc,CAAC,QAAnC,CAA4C,MAAM,CAAE,CAApD,CAAuD,SAAS,CAAED,OAAO,CAACR,MAA1E,uBACE,YAAK,GAAG,CAAGS,MAAX,CAAoB,GAAG,CAAE,MAAzB,CAAiC,SAAS,CAAED,OAAO,CAACJ,GAApD,EADF,EAFJ,cAKE,cACE,MAAM,CAAC,SADT,CAEE,SAAS,CAAEI,OAAO,CAACH,KAFrB,CAGE,EAAE,CAAC,kBAHL,CAIE,IAAI,CAAC,MAJP,CAKE,OAAO,CAAC,aALV,CAME,QAAQ,CAAE,kBAACY,CAAD,QAAOD,CAAAA,aAAa,CAACC,CAAD,CAApB,EANZ,EALF,cAaE,cAAO,OAAO,CAAC,kBAAf,uBACE,KAAC,UAAD,EACE,KAAK,CAAC,SADR,CAEE,aAAW,gBAFb,CAGE,SAAS,CAAC,MAHZ,uBAKE,KAAC,sBAAD,EAAwB,QAAQ,CAAC,OAAjC,CAAyC,KAAK,CAAC,SAA/C,EALF,EADF,EAbF,GADF,EADF,cA0BE,eAAQ,SAAS,CAAC,cAAlB,CAAiC,OAAO,CAAEc,WAA1C,uBA1BF,GADF,CA8BD,CA1ED,CA2EA,cAAexB,CAAAA,MAAf","sourcesContent":["import React, { useState } from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport { IconButton } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport PhotoCameraRoundedIcon from \"@material-ui/icons/PhotoCameraRounded\";\r\nimport axios from 'axios';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    height: \"100%\",\r\n    textAlign: 'center',\r\n  },\r\n  imgBox: {\r\n    maxWidth: \"80%\",\r\n    maxHeight: \"80%\",\r\n    margin: \"auto\"\r\n  },\r\n  img: {\r\n    height: \"inherit\",\r\n    maxWidth: \"inherit\",\r\n  },\r\n  input: {\r\n    display: \"none\"\r\n  }\r\n}));\r\n\r\nconst Camera = () => {\r\n\r\n  const classes = useStyles();\r\n  const [source, setSource] = useState(\"\");\r\n  const dispatch = useDispatch();\r\n\r\n  const sendFileName = (fileName) => {\r\n    dispatch({type: \"setItemFile\", payload:fileName})\r\n\r\n  }\r\n  \r\n  const handleCapture = (e) => {\r\n    if (e.target.files) {\r\n      if (e.target.files.length !== 0) {\r\n        const file = e.target.files[0];\r\n        const formData = new FormData();\r\n        const newUrl = URL.createObjectURL(file);\r\n        setSource(newUrl);\r\n        formData.append(\r\n          \"file\",\r\n          file\r\n        );\r\n        //console.log(formData.get('file'));\r\n        dispatch({ type: 'handleCapture', payload: formData })\r\n\r\n      }\r\n    }\r\n  };\r\n\r\n  const storeImage = useSelector( state => state.image );\r\n\r\n  const imageUpload = () => {\r\n    axios.post(\"http://localhost:4000/images\", storeImage)\r\n    .then( res => {\r\n      console.log( 'Axios response: ', res );\r\n      sendFileName(res.data)\r\n      dispatch({type: 'clearStateImage'})\r\n      setSource(\"\");\r\n    }, (error) => {\r\n      console.error(error);\r\n    })\r\n    .catch(error => console.error(error))\r\n  }\r\n  \r\n  return (\r\n    <div className={classes.root}>\r\n      <Grid container>\r\n        <Grid item xs={12}>\r\n          { source &&\r\n            <Box display=\"flex\" justifyContent=\"center\" border={1} className={classes.imgBox}>\r\n              <img src={ source } alt={\"snap\"} className={classes.img}></img>\r\n            </Box> }\r\n          <input\r\n            accept=\"image/*\"\r\n            className={classes.input}\r\n            id=\"icon-button-file\"\r\n            type=\"file\"\r\n            capture=\"environment\"\r\n            onChange={(e) => handleCapture(e)}\r\n          />\r\n          <label htmlFor=\"icon-button-file\">\r\n            <IconButton\r\n              color=\"primary\"\r\n              aria-label=\"upload picture\"\r\n              component=\"span\"\r\n            >\r\n              <PhotoCameraRoundedIcon fontSize=\"large\" color=\"primary\" />\r\n            </IconButton>\r\n          </label>\r\n        </Grid>\r\n      </Grid>\r\n      <button className=\"btn btn-dark\" onClick={imageUpload}>Save file</button>\r\n    </div>\r\n  );\r\n}\r\nexport default Camera;"]},"metadata":{},"sourceType":"module"}