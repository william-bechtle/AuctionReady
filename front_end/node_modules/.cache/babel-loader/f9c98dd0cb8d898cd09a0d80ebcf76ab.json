{"ast":null,"code":"import _slicedToArray from\"/home/frank/React/project2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import Grid from'@material-ui/core/Grid';import Box from'@material-ui/core/Box';import{IconButton}from'@material-ui/core';import{makeStyles}from'@material-ui/core/styles';import PhotoCameraRoundedIcon from\"@material-ui/icons/PhotoCameraRounded\";import axios from'axios';import{useDispatch,useSelector}from'react-redux';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:{height:\"100%\",textAlign:'center'},imgBox:{maxWidth:\"80%\",maxHeight:\"80%\",margin:\"auto\"},img:{height:\"inherit\",maxWidth:\"inherit\"},input:{display:\"none\"}};});var Camera=function Camera(){var classes=useStyles();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),source=_useState2[0],setSource=_useState2[1];var dispatch=useDispatch();var sendFileName=function sendFileName(fileName){dispatch({type:\"setItemFile\",payload:fileName});};var handleCapture=function handleCapture(e){if(e.target.files){if(e.target.files.length!==0){var file=e.target.files[0];var formData=new FormData();var newUrl=URL.createObjectURL(file);setSource(newUrl);formData.append(\"file\",file);//console.log(formData.get('file'));\ndispatch({type:'handleCapture',payload:formData});}}};var storeImage=useSelector(function(state){return state.image;});var imageUpload=function imageUpload(){axios.post(\"http://192.168.0.3:4000/imageUpload\",storeImage).then(function(res){console.log('Axios response: ',res);sendFileName(res.data);dispatch({type:'clearStateImage'});setSource(\"\");},function(error){console.error(error);}).catch(function(error){return console.error(error);});};return/*#__PURE__*/_jsxs(\"div\",{className:classes.root,children:[/*#__PURE__*/_jsx(Grid,{container:true,children:/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,children:[source&&/*#__PURE__*/_jsx(Box,{display:\"flex\",justifyContent:\"center\",border:1,className:classes.imgBox,children:/*#__PURE__*/_jsx(\"img\",{src:source,alt:\"snap\",className:classes.img})}),/*#__PURE__*/_jsx(\"input\",{accept:\"image/*\",className:classes.input,id:\"icon-button-file\",type:\"file\",capture:\"environment\",onChange:function onChange(e){return handleCapture(e);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"icon-button-file\",children:/*#__PURE__*/_jsx(IconButton,{color:\"primary\",\"aria-label\":\"upload picture\",component:\"span\",children:/*#__PURE__*/_jsx(PhotoCameraRoundedIcon,{fontSize:\"large\",color:\"primary\"})})})]})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-dark\",onClick:imageUpload,children:\"Save file\"})]});};export default Camera;","map":{"version":3,"sources":["/home/frank/React/project2/src/components/camera/index.js"],"names":["React","useState","Grid","Box","IconButton","makeStyles","PhotoCameraRoundedIcon","axios","useDispatch","useSelector","useStyles","theme","root","height","textAlign","imgBox","maxWidth","maxHeight","margin","img","input","display","Camera","classes","source","setSource","dispatch","sendFileName","fileName","type","payload","handleCapture","e","target","files","length","file","formData","FormData","newUrl","URL","createObjectURL","append","storeImage","state","image","imageUpload","post","then","res","console","log","data","error","catch"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport Box from '@material-ui/core/Box';\nimport { IconButton } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport PhotoCameraRoundedIcon from \"@material-ui/icons/PhotoCameraRounded\";\nimport axios from 'axios';\nimport { useDispatch, useSelector } from 'react-redux';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: \"100%\",\n    textAlign: 'center',\n  },\n  imgBox: {\n    maxWidth: \"80%\",\n    maxHeight: \"80%\",\n    margin: \"auto\"\n  },\n  img: {\n    height: \"inherit\",\n    maxWidth: \"inherit\",\n  },\n  input: {\n    display: \"none\"\n  }\n}));\n\nconst Camera = () => {\n\n  const classes = useStyles();\n  const [source, setSource] = useState(\"\");\n  const dispatch = useDispatch();\n\n  const sendFileName = (fileName) => {\n    dispatch({type: \"setItemFile\", payload:fileName})\n\n  }\n  \n  const handleCapture = (e) => {\n    if (e.target.files) {\n      if (e.target.files.length !== 0) {\n        const file = e.target.files[0];\n        const formData = new FormData();\n        const newUrl = URL.createObjectURL(file);\n        setSource(newUrl);\n        formData.append(\n          \"file\",\n          file\n        );\n        //console.log(formData.get('file'));\n        dispatch({ type: 'handleCapture', payload: formData })\n\n      }\n    }\n  };\n\n  const storeImage = useSelector( state => state.image );\n\n  const imageUpload = () => {\n    axios.post(\"http://192.168.0.3:4000/imageUpload\", storeImage)\n    .then( res => {\n      console.log( 'Axios response: ', res );\n      sendFileName(res.data)\n      dispatch({type: 'clearStateImage'})\n      setSource(\"\");\n    }, (error) => {\n      console.error(error);\n    })\n    .catch(error => console.error(error))\n  }\n  \n  return (\n    <div className={classes.root}>\n      <Grid container>\n        <Grid item xs={12}>\n          { source &&\n            <Box display=\"flex\" justifyContent=\"center\" border={1} className={classes.imgBox}>\n              <img src={ source } alt={\"snap\"} className={classes.img}></img>\n            </Box> }\n          <input\n            accept=\"image/*\"\n            className={classes.input}\n            id=\"icon-button-file\"\n            type=\"file\"\n            capture=\"environment\"\n            onChange={(e) => handleCapture(e)}\n          />\n          <label htmlFor=\"icon-button-file\">\n            <IconButton\n              color=\"primary\"\n              aria-label=\"upload picture\"\n              component=\"span\"\n            >\n              <PhotoCameraRoundedIcon fontSize=\"large\" color=\"primary\" />\n            </IconButton>\n          </label>\n        </Grid>\n      </Grid>\n      <button className=\"btn btn-dark\" onClick={imageUpload}>Save file</button>\n    </div>\n  );\n}\nexport default Camera;"]},"metadata":{},"sourceType":"module"}